import{i as m}from"./formatting.CXlgMN_0.js";import{M as u}from"./errors.D6JPbq4o.js";function a(e,t){let s,n;typeof t=="string"&&(t={type:t}),e instanceof u&&(n=e.args),e instanceof Error?(console.log("Caught an error:",e),s=e.message,t??={type:"error",duration:5e3}):s=String(e);const r=new CustomEvent("multi-test:toast",{detail:{message:s,args:n,...t}});document.dispatchEvent(r)}function l(e){document.addEventListener("multi-test:toast",t=>{const s=t;let{message:n,duration:r,type:i="info",args:o}=s.detail;if(o){const c=document.querySelector(`#errors-${n}`)?.innerHTML;c?n=m(c,o):n+=` (${o})`}f(e,n,{duration:r,type:i})})}let d;function f(e,t,s={}){const{duration:n=3e3,type:r="info"}=s,i=e.querySelector(".toast-message");e&&i&&(i.textContent=t,e.classList.remove("info","warn","error","success"),e.classList.add(r),e.classList.remove("hidden"),clearTimeout(d),d=setTimeout(()=>{e.classList.add("hidden")},n))}Object.assign(window,{showToast:a});l(document.getElementById("toast"));window.addEventListener("error",e=>a(e.error));window.addEventListener("unhandledrejection",e=>a(e.reason));
